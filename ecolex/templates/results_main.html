{% load tags %}

{% include 'bits/type_facet.html' %}


<p class="small clearfix">

  <!-- Ugly -->
  <span class="pull-left">
    Found
    {% if 'treaty' in form.type.data and form.type.data|length != 2 %}
      {{ facets.type.treaty }} treaties
    {% elif 'decision' in form.type.data and form.type.data|length != 2 %}
      {{ facets.type.decision }} COP decisions
    {% else %}
      {{ results.count }} results
    {% endif %}
  </span>
  
  <span class="pull-right">
    {% include 'bits/sortby.html' %}
  </span>
</p>

{% if debug %}
<pre>
  {{ results.debug_result.debug_query }}
  {{ results.debug_result.debug_params }}
</pre>
{% endif %}

<hr>

<!-- To do -->
<!-- <button data-toggle="offcanvas" data-target="#filters" data-canvas="body"></button> -->

<ul class="search-results">
  {% for result in results %}
    {% include "bits/search_result.html" with result=result results=results %}
  {% endfor %}
</ul>

<hr>

<div class="clearfix">
    
  {% if page.pages %}
    <div class="pull-right">
      
      <a class="btn btn-sm btn-default" 
         href="?{{ page.prev_url }}"
         {% if page.number == 1 %}disabled{% endif %}>Previous</a>
      
      <a class="btn btn-sm btn-default"
         href="?{{ page.next_url }}"
         {% if page.number == page.pages %}disabled{% endif %}>Next</a>
      
    </div>
    
  Page {{ page.number }} of {{ page.pages }}

  {% else %}

  No more results

  {% endif %}


</div>
