{% load tags %}

<div class="btn-group btn-group-sm filter-type">
  <!-- Treaty filter -->
  <button type="button"
          class="btn btn-default {% if 'treaty' in form.type.data and form.type.data|length != 2 %}active{% endif %}"
          data-filter="#treaty-fieldset"
          data-toggle="tooltip"
          data-placement="bottom"
          data-container="body"
          data-value="treaty"
      {% if not 'treaty' in form.type.data %}
          title="Show Treaties"
      {% elif form.type.data|length == 2 %}
          title="Show only Treaties"
      {% else %}
          title="Showing only Treaties"
      {% endif %}>
    <span class="icon icon-treaty"></span>
    {% if facets.type.treaty > 0 %}
      <span class="badge">{{ facets.type.treaty }}</span>
    {% endif %}
    <span class="btn-label">Treaties</span>
  </button>

  <!-- COP decision filter -->
  <button type="button"
          class="btn btn-default {% if 'decision' in form.type.data and form.type.data|length != 2 %}active{% endif %}"
          data-filter="#copdecision-fieldset"
          data-toggle="tooltip"
          data-placement="bottom"
          data-container="body"
          data-value="decision"
      {% if not 'decision' in form.type.data %}
          title="Show COP decisions"
      {% elif form.type.data|length == 2 %}
          title="Show only COP decisions"
      {% else %}
          title="Showing only COP decisions"
      {% endif %}>
    <span class="icon icon-cop-decision"></span>
    {% if facets.type.decision > 0 %}
      <span class="badge">{{ facets.type.decision }}</span>
    {% endif %}
    <span class="btn-label">COP Decisions</span>
  </button>

  <!-- Legislation filter -->
  <button type="button"
          class="btn btn-default"
          data-filter
          data-toggle="tooltip"
          data-placement="bottom"
          data-container="body"
          title="Hide Legislation"
          disabled>
    <span class="icon icon-legislation"></span>
    <span class="badge">0</span>
    <span class="btn-label">Legislation</span>
  </button>

  <!-- Court decision filter -->
  <button type="button"
          class="btn btn-default"
          data-filter
          data-toggle="tooltip"
          data-placement="bottom"
          data-container="body"
          title="Hide Court Decisions"
          disabled>
    <span class="icon icon-court-decision"></span>
    <span class="badge">0</span>
    <span class="btn-label">Court Decisions</span>
  </button>

  <!-- Literature filter -->
  <button type="button"
          class="btn btn-default"
          data-filter
          data-toggle="tooltip"
          data-placement="bottom"
          data-container="body"
          title="Hide Literature"
          disabled>
    <span class="icon icon-literature"></span>
    <span class="badge">0</span>
    <span class="btn-label">Literature</span>
  </button>
</div>


<p class="small clearfix">

  <!-- Ugly -->

  {% if 'treaty' in form.type.data and form.type.data|length != 2 %}
    <span class="pull-left">Showing only treaties</span>
  {% elif 'decision' in form.type.data and form.type.data|length != 2 %}
    <span class="pull-left">Showing only COP decisions</span>
  {% else %}
    <span class="pull-left">Total of {{ results.count }} results</span>
  {% endif %}
  
  <span class="pull-right">
    {% include 'bits/sortby.html' %}
  </span>
</p>

<hr>

<!-- To do -->
<!-- <button data-toggle="offcanvas" data-target="#filters" data-canvas="body"></button> -->

<ul class="search-results">
  {% for result in results %}
    {% include "bits/search_result.html" with result=result %}
  {% endfor %}
</ul>

<hr>

{% if page.pages %}
  <ul class="pagination">
    {% if page.number > 1 %}
      <li>
        <a href="?{{ page.first_url }}" class="prev">&laquo; first</a>
      </li>
      <li>
        <a href="?{{ page.prev_url }}" class="prev">&lt; previous</a>
      </li>
    {% endif %}
    <li class="active">
      <span>Page {{ page.number }} of {{ page.pages }}.</span>
    </li>
    {% if page.number < page.pages %}
      <li>
        <a href="?{{ page.next_url }}" class="next">next &gt;</a>
      </li>
      <li>
        <a href="?{{ page.last_url }}" class="next">last &raquo;</a>
      </li>
    {% endif %}
    </li>
  </ul>
{% endif %}
