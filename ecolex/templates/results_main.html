{% load tags %}

{% include 'bits/type_facet.html' %}

{% if text_suggestion and results.get_suggested_text %}
<p class="clearfix">
    Did you mean: <a href="?q={{ results.get_suggested_text }}"><em>{{ results.get_suggested_text }}</em></a>?
</p>
{% endif %}

<p class="small clearfix">
  <!-- Ugly -->
  <span class="pull-left">
    Found
    {% if 'treaty' in form.type.data and form.type.data|length != 2 %}
      {{ facets.type.treaty }} treaties
    {% elif 'decision' in form.type.data and form.type.data|length != 2 %}
      {{ facets.type.decision }} COP decisions
    {% else %}
      {{ results.count }} results
    {% endif %}
  </span>
  
  <span class="pull-right">
    {% include 'bits/sortby.html' %}
  </span>
</p>

<hr>

<!-- To do -->
<!-- <button data-toggle="offcanvas" data-target="#filters" data-canvas="body"></button> -->

<ul class="search-results">
  {% for result in results %}
    {% include "bits/search_result.html" with result=result results=results %}
  {% endfor %}
</ul>

<hr>

{% if page.pages %}
  <ul class="pagination">
    {% if page.number > 1 %}
      <li>
        <a href="?{{ page.first_url }}" class="prev">&laquo; first</a>
      </li>
      <li>
        <a href="?{{ page.prev_url }}" class="prev">&lt; previous</a>
      </li>
    {% endif %}
    <li class="active">
      <span>Page {{ page.number }} of {{ page.pages }}.</span>
    </li>
    {% if page.number < page.pages %}
      <li>
        <a href="?{{ page.next_url }}" class="next">next &gt;</a>
      </li>
      <li>
        <a href="?{{ page.last_url }}" class="next">last &raquo;</a>
      </li>
    {% endif %}
    </li>
  </ul>
{% endif %}
