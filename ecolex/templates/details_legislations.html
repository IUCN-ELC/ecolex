{% extends 'layout.html' %}
{% load tags %}
{% load i18n %}

{% block meta %}
  <title>{{ document.title|striptags|html_unescape }}</title>
{% endblock %}

{% block breadcrumbs %}
  {% breadcrumb "Search results" 'results' query %}
  {% breadcrumb "Treaty" 'treaty_details' query slug=document.slug %}
  {% breadcrumb "Legislation" %}
{% endblock %}

{% block content %}

<article class="record-details">

  <header>
    <div class="record-title">
      <h1>{{ document.title|safe }}</h1>
      <h2>{% trans 'Related legislation' %}</h2>
    </div>
  </header>

  {% if treaty_implements %}
    <h4> Implemented by </h4>
    <table class="table decisions-expanded">
      <tbody>
      {% for legislation in treaty_implements %}
      <tr>
        <div class="treaty-link-container">
          <h3 class="search-result-title">
            <a href="{{ legislation.details_url }}?{{ query }}"
               title="{{ legislation.title|safe|striptags }}">{{ legislation.title|safe }}</a>
          </h3>
          {% include 'short_display/legislation.html' with result=legislation %}
        </div>
      </tr>
      <hr>
      {% endfor %}
      </tbody>
    </table>
  {%endif %}

  {% if treaty_cites %}
    <h4> Cited by </h4>
    <table class="table decisions-expanded">
      <tbody>
      {% for legislation in treaty_cites %}
      <tr>
        <div class="treaty-link-container">
          <h3 class="search-result-title">
            <a href="{{ legislation.details_url }}?{{ query }}"
               title="{{ legislation.title|safe|striptags }}">{{ legislation.title|safe }}</a>
          </h3>
          {% include 'short_display/legislation.html' with result=legislation %}
        </div>
      </tr>
      <hr>
      {% endfor %}
      </tbody>
    </table>
  {% endif %}

</article>
{% endblock %}
