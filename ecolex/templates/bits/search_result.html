{% load tags %}
<li class="search-result">

  <h3 class="search-result-title">
    <a href="{{ result.details_url }}?{{ query }}"
       title="{{ result.title|safe|striptags }}">{{ result.title|safe }}</a>
  </h3>

  {% if result.type == "decision" %}
    <div class="search-result-details">
      <strong class="sr-type">{{ result.type|capfirst }}</strong>
      {% if result.document_id %}
        <span class="sr-id"> {{ result.document_id }} </span>{% endif %}
      &ndash;
      <span class="sr-status" title="Status: {{ result.status|capfirst }}">
        {{ result.status|capfirst }}
      </span>
      {% if result.date %}
        |
        <time class="sr-date" title="Date of document: {{ result.date }}">
          {{ result.date|date:"b j, Y"|capfirst  }}
        </time>
      {% endif %}
    </div>
    {% if result.keywords %}
      <p class="search-result-details"><strong>Keywords:</strong>
        {{ result.keywords | join_by:", " | safe }}
      </p>
    {% endif %}
    <p class="search-result-source">Source: {{ result.source }}, <a target="_blank" href="http://www.informea.org/">InforMEA</a></p>

  {% elif result.type == "literature" %}
    {% if result.parent_title %}
        <p class="search-result-details">
            <strong>In:</strong> {{ result.parent_title | safe }}
        </p>
    {% endif %}

    <div class="search-result-details">
      {% if result.authors %}
        <span>{{ result.authors | join_by:", " | safe }}</span>
      {% endif %}
      {% if result.publisher %}
        | <span>{{ result.publisher }}</span>
      {% endif %}
      {% if result.publication_place %}
        | <span>{{ result.publication_place }}</span>
      {% endif %}
    </div>
    <p class="search-result-details">
      <strong class="sr-type">{{ result.type|capfirst }}</strong>
      {% if result.jurisdiction %}
        | <span>{{ result.jurisdiction }}</span>
      {% elif result.country %}
        | <span>{{ result.country }}</span>
      {% endif %}
      {% if result.publication_date %}
        |
        <time class="sr-date" title="Publication date: {{ result.publication_date }}">
          {{ result.publication_date }}
        </time>
      {% endif %}
    </p>
    <p class="search-result-details"><strong>Keywords:</strong>
      {{ result.keywords | join_by:", " | safe }}
    </p>
    <p class="search-result-source">Source: <a target="_blank" href="http://iucn.org">{{ result.source }}</a> (ID: {{ result.document_id }})</p>

  {% elif result.type == 'treaty' %}

    <div class="search-result-details">
      <strong class="sr-type">{{ result.type|capfirst }}</strong>
        |
        <span class="sr-doctype">{{ result.type_of_document }}</span>
      {% if result.place_of_adoption %}
        |
        <span class="sr-place"> {{ result.place_of_adoption }}</span>
      {% endif %}
      {% if result.date %}
        |
        <time class="sr-date" title="Date of document: {{ result.date }}">
          {{ result.date|date:"b j, Y"|capfirst }}
        </time>
      {% endif %}
    </div>
    {% if result.keywords %}
      <p class="search-result-details"><strong>Keywords:</strong>
        {{ result.keywords | join_by:", " | safe }}
      </p>
    {% endif %}
    <p class="search-result-source">Source: <a target="_blank" href="http://iucn.org">{{ result.source }}</a> (ID: {{ result.document_id }})</p>

  {% elif result.type == "court_decision" %}
    <div class="search-result-details">
      <strong class="sr-type">Court Decision</strong>
        |
        <span class="sr-doctype">{{ result.type_of_document }}</span>
      {% if result.country %}
        |
        <span class="sr-country">{{ result.country }}</span>
      {% endif %}
      {% if result.date %}
        |
        <time class="sr-date" title="Date of document: {{ result.date }}">
          {{ result.date|date:"b j, Y"|capfirst  }}
        </time>
      {% endif %}
    </div>
    <p class="search-result-description">{# result.summary|safe #}</p>
    {% if result.keywords %}
      <p class="search-result-details"><strong>Keywords:</strong>
        {{ result.keywords | join_by:", " | safe }}
      </p>
    {% endif %}
    <p class="search-result-source">Source: {{ result.source }}, <a target="_blank" href="http://www.informea.org/">InforMEA</a></p>

  {% elif result.type == "legislation" %}
    <div class="search-result-details">
      <strong class="sr-type">Legislation</strong>
      {% if result.country %}
        |
        <span class="sr-jurisdiction">{{ result.country }}</span>
      {% endif %}
      {% if result.date %}
        |
        <time class="sr-date" tile="Date of document: {{ result.date }}">
         {{ result.date|date:"b j, Y"|capfirst }}
        </time>
      {% endif %}
      {% if result.status and result.status != "in force" %}
        |
        <span class="sr-status" title="Status: {{ result.status|capfirst }}">
          {{ result.status|capfirst }}
        </span>
      {% endif %}
    </div>
    {% if result.keywords %}
      <p class="search-result-details"><strong>Keywords:</strong>
        {{ result.keywords | join_by:", " | safe }}
      </p>
    {% endif %}
    <p class="search-result-source">Source: {{ result.source }}, <a target="_blank" href="http://faolex.fao.org/">FAOLEX</a> (ID: {{ result.document_id }})</p>
  {% endif %}
</li>
